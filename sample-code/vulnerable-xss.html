<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>User Profile - XSS Vulnerable</title>
  </head>
  <body>
    <h1>User Profile</h1>

    <div id="profile">
      <script>
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get("username");

        document.getElementById("profile").innerHTML =
          "<h2>Welcome, " + username + "</h2>";
      </script>
    </div>

    <form action="/search" method="get">
      <input type="text" name="query" placeholder="Search..." />
      <button type="submit">Search</button>
    </form>

    <div id="search-results">
      <script>
        const query = urlParams.get("query");
        if (query) {
          document.getElementById("search-results").innerHTML =
            "<p>Results for: " + query + "</p>";
        }
      </script>
    </div>

    <div id="comments">
      <script>
        const userScript = urlParams.get("script");
        if (userScript) {
          eval(userScript);
        }
      </script>
    </div>

    <script>
      const apiKey = "sk-secret-key-12345";
      localStorage.setItem("apiKey", apiKey);

      console.log("User API Key:", apiKey);
    </script>
  </body>
</html>
